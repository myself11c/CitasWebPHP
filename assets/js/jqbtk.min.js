(function(a){a.fn.keyboard=function(c){var e=a.extend({keyboardLayout:[[["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["0","0"],["del","del"]],[["q","Q"],["w","W"],["e","E"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["-","="],["_","+"]],[["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["'",":"],["@",";"],["#","~"]],[["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",",","],[".","."],["?","!"]],[["shift","shift"],["space","space"],["shift","shift"]]],numpadLayout:[[["7"],["8"],["9"]],[["4"],["5"],["6"]],[["1"],["2"],["3"]],[["del"],["0"],["."]]],telLayout:[[["1"],["2"],["3"]],[["4"],["5"],["6"]],[["7"],["8"],["9"]],[["del"],["0"],["."]]],layout:false,type:false,btnTpl:'<button type="button">',btnClasses:"btn btn-default",btnActiveClasses:"active btn-primary",initCaps:false,placement:"bottom"},c);if(!e.layout){if((a(this).attr("type")==="tel"&&a(this).hasClass("keyboard-numpad"))||e.type==="numpad"){e.layout=e.numpadLayout}else{if((a(this).attr("type")==="tel")||e.type==="tel"){e.layout=e.telLayout}else{e.layout=e.keyboardLayout}}}var b=false;a(document).off("touchstart",".jqbtk-row .btn");a(document).on("touchstart",".jqbtk-row .btn",function(h){a(this).addClass(e.btnActiveClasses);var i=a(this).attr("data-value"+(b?"-alt":""));var g=a("[aria-describedby="+a(this).closest(".popover").attr("id")+"]");var f=g.val();switch(i){case"space":f+=" ";break;case"shift":b=!b;d();break;case"del":f=f.substr(0,f.length-1);break;case"enter":g.closest("form").submit();break;default:f+=i;b=false}g.val(f);d();g.focus()});a(document).on("touchend",".jqbtk-row .btn",function(){a(this).removeClass(e.btnActiveClasses)});a(document).on("touchstart",".jqbtk-row",function(g){g.preventDefault();var f=a("[aria-describedby="+a(this).closest(".popover").attr("id")+"]");f.focus()});var d=function(){a(".jqbtk-container .btn").each(function(){switch(a(this).attr("data-value")){case"shift":case"del":case"space":case"enter":break;default:a(this).text(a(this).attr("data-value"+(b?"-alt":"")))}})};return this.each(function(){a(this).popover({content:function(){if(e.initCaps&&a(this).val().length===0){b=true}var f=a('<div class="jqbtk-container">');a.each(e.layout,function(){var g=this;var h=a('<div class="jqbtk-row">');a.each(g,function(){var i=a(e.btnTpl).addClass(e.btnClasses);i.attr("data-value",this[0]).attr("data-value-alt",this[1]);switch(this[0]){case"shift":i.addClass("jqbtk-shift").html('<span class="glyphicon glyphicon-arrow-up"></span>');break;case"space":i.addClass("jqbtk-space").html("&nbsp;");break;case"del":i.addClass("jqbtk-del").html('<span class="glyphicon glyphicon-arrow-left"></span>');break;case"enter":i.addClass("jqbtk-enter").html("Enter");break;default:i.text(i.attr("data-value"+(b?"-alt":"")))}h.append(i)});f.append(h)});return f},html:true,placement:e.placement,trigger:"focus",container:"body",viewport:"body"})})}}(jQuery));